# Аудит качества курсов онлайн-школы и рекомендательная система с анализом LTV

## Ключевая находка
**Школа предлагает 127 курсов, но нет объективной системы оценки качества → текущая рекомендательная система рискует давать временный рост среднего чека без реального влияния на LTV и удержание студентов.**

## Проблема продукта
Рекомендации строятся без учёта реального качества курсов. В результате возможен краткосрочный подъём выручки за счёт «громких» курсов, но долгосрочное удержание и повторные покупки могут падать.

## Что было сделано в этом проекте

### 1. Создание рекомендательной системы
- **Обработка данных**: Анализ 12,656 записей о покупках, 127 уникальных курсов
- **Алгоритм рекомендаций**: Коллаборативная фильтрация на основе совместных покупок
- **Порог значимости**: Учитываются пары курсов с частотой покупок >9
- **Покрытие**: Полные рекомендации для всех 127 курсов

### 2. Анализ качества курсов (синтетические данные)
- **Completion Rate (COR)**: 30-70% (бета-распределение)
- **Customer Satisfaction Index (CSI)**: 3-5 баллов
- **Net Promoter Score (NPS)**: от -50 до 80
- **Retention Rate**: 10-50%
- **Время проверки ДЗ**: 1-168 часов
- **Интегральный показатель качества**: 0-100 баллов

### 3. Расчет Lifetime Value (LTV)
- **4 сценария**:
  1. Базовый (без рекомендаций): LTV = 33,000 руб.
  2. С рекомендациями (без качества): +17% к LTV
  3. С рекомендациями + качество: +103% к LTV
  4. Идеальный (качество + персонализация): +256% к LTV

### 4. A/B-тестирование рекомендаций
- **Контрольная группа** (без рекомендаций): 3.35% конверсии
- **Тестовая группа** (рекомендации без качества): 3.92% конверсии (+17%)
- **Группа качества** (рекомендации с качеством): 4.5% конверсии (+34%)
- **Статистическая значимость**: p-value < 0.05

## Ключевые метрики, которых сейчас не хватает

| Метрика | Текущее состояние | Почему важно |
|---------|-------------------|--------------|
| **Completion Rate (COR)** | Нет данных | Главный индикатор качества курса |
| **CSI / NPS по курсу / потоку** | Частично, без систематизации | Показывает удовлетворённость и лояльность |
| **Среднее время ответа на вопросы** | Неизвестно | Сильно влияет на отток и впечатление |
| **Retention на следующий курс** | Нет данных | Показывает, растёт ли LTV после рекомендаций |
| **Доходимость до трудоустройства** | Нет системных данных | Самый сильный долгосрочный показатель ценности |
| **Скорость проверки ДЗ** | Неизвестно по потокам | Один из главных драйверов оттока |

## Основные выводы и продуктовые рекомендации

### **P0 — Критично (1–3 месяца)**
1. **Создать единую систему объективной оценки качества курсов** (COR + CSI + NPS + скорость обратной связи + % положительных отзывов + трудоустройство)
2. **Внедрить рекомендательную систему с учетом качества** (уже готова к внедрению)
3. **Провести аудит курсов с низким качеством** (<50 баллов в синтетических данных)

### **P1 — Высокий приоритет**
1. **Внедрить обязательный сбор метрик по каждому потоку и курсу**
2. **Перестроить рекомендательную систему**: основной вес — качество курса (COR > 70%, NPS > 50), вторично — персонализация (уровень, профессия, интересы)
3. **Начать сбор реальных метрик качества** для замены синтетических данных

### **P2 — Среднесрочные задачи**
1. **A/B-тестирование двух версий рекомендаций**: старая vs новая (с учётом качества)
2. **Пост-курсовые опросы** с детализацией по блокам и преподавателям
3. **Создание системы непрерывного улучшения курсов** на основе метрик качества

## Результаты анализа

### Бизнес-эффект от внедрения
- **Рост конверсии**: +17% (с 3.35% до 3.92%)
- **Дополнительный месячный доход**: 6.2 млн руб.
- **ROI рекомендательной системы**: 360% за год
- **Срок окупаемости**: 3.3 месяца
- **Рост LTV**: до +256% в идеальном сценарии

### Качество курсов (по синтетическим данным)
- **Высокое качество** (≥70 баллов): 40 курсов (31.5%)
- **Среднее качество** (50-70 баллов): 64 курса (50.4%)
- **Низкое качество** (<50 баллов): 23 курса (18.1%)

## Структура проекта
online-school-quality-audit/
├── notebooks/
│ └── recommendation_system.ipynb # Основной ноутбук с полным анализом
├── data/
│ ├── final_course_recommendations.csv # Таблица рекомендаций
│ ├── course_quality_metrics.csv # Метрики качества курсов
│ ├── course_pair_statistics.csv # Статистика совместных покупок
│ ├── ltv_analysis_results.csv # Результаты LTV анализа
│ └── ab_test_results.csv # Результаты A/B-теста
├── reports/
│ └── summary_report.txt # Сводный отчет
├── src/
│ ├── data_loader.py # Загрузка данных из БД
│ ├── recommender.py # Рекомендательная система
│ ├── quality_metrics.py # Расчет метрик качества
│ └── ltv_calculator.py # Расчет LTV
├── requirements.txt # Зависимости
└── README.md # Этот файл

## Файлы результатов

После выполнения ноутбука генерируются следующие файлы:

1. **`final_course_recommendations.csv`** - рекомендации для всех 127 курсов
2. **`course_quality_metrics.csv`** - метрики качества каждого курса (синтетические)
3. **`course_pair_statistics.csv`** - статистика совместных покупок
4. **`ltv_analysis_results.csv`** - расчет Lifetime Value для 4 сценариев
5. **`ab_test_results.csv`** - результаты A/B-тестирования рекомендаций
6. **`summary_report.txt`** - сводный отчет с выводами и рекомендациями

## Стек технологий

- **Python 3.9+**
- **Анализ данных**: pandas, numpy, scipy
- **Визуализация**: matplotlib, seaborn
- **Машинное обучение**: scikit-learn (для нормализации данных)
- **Работа с БД**: psycopg2-binary
- **Веб-фреймворк (для будущего внедрения)**: Flask/FastAPI
- **Продуктовые метрики**: LTV, конверсия, retention, COR, CSI, NPS

## Как запустить локально

```bash
# 1. Клонировать репозиторий
git clone https://github.com/TaukitaMatsuda/online-school-quality-audit.git
cd online-school-quality-audit

# 2. Установить зависимости
pip install -r requirements.txt

# 3. Запустить ноутбук с анализом
jupyter notebook notebooks/recommendation_system.ipynb

# Или запустить как скрипт
python src/main.py

